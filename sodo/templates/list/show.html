{% extends 'base.html' %}

{% load humanize %}

{% block title %}
	List {{ thelist.name }} by {% if thelist.user.get_full_name %}{{ thelist.user.get_full_name }}{% else %}{{ thelist.user.username }}{% endif %}
{% endblock %}

{% block content %}

	<h1>{{ thelist.name }} by <a href='/user/{{ thelist.user.username }}/'>{% if thelist.user.get_full_name %}{{ thelist.user.get_full_name }}{% else %}{{ thelist.user.username }}{% endif %}</a></h1>

	<div id='thelist' class='styled-form'>
		{% for item in thelist.list_items.iterator %}
			<div class='list-item {% if item.completed %}completed{% endif %}'>
				<ul class='clearfix'>
					<li class='list-item-completed'><input type='checkbox' {% if item.completed %} checked {% endif %}></li>
					<li class='list-item-desc'>{{ item.desc|truncatewords:10 }}</li>
					<li class='list-item-date-added'>{% if item.date_added %}{{ _("Added")}}: {{ item.date_added|naturalday }}{% else %}--{% endif %}</li>
					<li class='list-item-date-completed clearfix'>{% if item.date_completed %}{{ _("Completed") }}: {{ item.date_completed|naturalday }}{% else %}--{% endif %}</li>
				</ul>
			</div>
		{% empty %}
			<h3>{{ _("No items in this list") }}</h3>			
		{% endfor %}
		
		{% ifequal user thelist.user %}
			<div class='list-item'>
				<ul class='clearfix'>
					<form method="post" action="{% url sodo.list.item.new thelist.id %}">{% csrf_token %}
						<li class='list-item-desc'><input class='new-list-item-desc' type="text" name='item-desc' value="{{ _("Add new item") }}"></li>
					</form>
				</ul>
			</div>	
		{% endifequal %}
	</div>

{% endblock %}